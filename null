# 管理应用生命周期

在应用托管至SAE后，您可以对应用执行更新、扩缩容、启停、删除、监控启停等应用生命周期管理操作。

## 概览

-   [更新应用](#section_mnz_blf_wqp)
-   [升级应用](#section_3qn_6i4_g2p)
-   [回退历史版本](#section_za4_q97_4e3)
-   [手动扩缩应用](#section_4qo_mzg_x4y)
-   [自动扩缩应用](#section_yvc_oom_nm9)
-   [启停应用](#section_2cm_p15_u7c)
-   [重启应用](#section_037_x85_1j1)
-   [删除应用](#section_5p2_07g_3sf)
-   [启停应用监控](#section_64l_nxr_tzn)

## 更新应用

应用托管至SAE后，您可以根据业务需要更新应用运行环境变量、镜像配置、启动命令和日志收集等配置项。

**说明：** 更新应用配置项后，该应用将会被重启，请在业务较少的时间段执行该操作。

1.  登录 [SAE 控制台](https://sae.console.aliyun.com)。

2.  在左侧导航栏单击**应用列表**，在**应用列表**页面上方选择**地域**，单击具体应用名称。

3.  在**应用详情**页面的右上角，单击**部署应用**。

4.  在**部署应用**页面下方，根据您的需求进行配置，并在配置完成后单击**确认**。

    可修改的配置项请参见[应用部署高级设置](/cn.zh-CN/应用部署/应用部署概述.md)。


## 升级应用

在应用托管至SAE后，您可以在**应用详情**页面单击**部署应用**升级应用，升级时您可以采用灰度发布或者分批发布，具体操作请参见[灰度发布或分批发布](/cn.zh-CN/应用部署/控制台部署/灰度发布或分批发布.md)。

## 回退历史版本

在应用托管至SAE后，您可以根据需要回退应用。

1.  登录 [SAE 控制台](https://sae.console.aliyun.com)。

2.  在左侧导航栏单击**应用列表**，在**应用列表**页面单击具体应用名称。

3.  在**应用详情**页面的右上角，单击**回退历史版本**，在**回退历史版本**页面选择版本，设置发布策略。

    ![回退历史版本](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/1974700061/p131909.png)

    回退历史版本的参数说明如下表所示。

    |参数名|说明|
    |---|--|
    |请选择历史版本|选择需要回退的历史版本。您还可以执行以下操作：     -   **下载**：单击历史版本对应的**下载**，可下载部署包。
    -   **查看详情**：单击历史版本对应的**查看详情**，可查看历史版本的配置信息。 |
    |部署应用后恢复自动弹性方式|如果应用配置了自动弹性伸缩策略，那么回退历史版本时需要选择自动弹性恢复方式。     -   **系统自动恢复**：回退历史版本时SAE自动将现有的自动弹性策略进行同步。
    -   **人工启动恢复**：当前所配置的弹性策略，需要您在回退历史版本后手动进行配置。 |
    |选择分批/灰度策略|选中**选择分批/灰度策略**为回退历史版本选择**发布策略**。|
    |发布策略|您可以选择**灰度发布**或者**分批发布**，具体说明请参见[灰度发布或分批发布](/cn.zh-CN/应用部署/控制台部署/灰度发布或分批发布.md)。|
    |灰度数量|设置需要首先进行灰度发布的应用实例数量，仅**发布策略**为**灰度发布**时需要设置。|
    |灰度后剩余批次|灰度发布后，剩余的应用实例完成发布的批次，仅**发布策略**为**灰度发布**时需要设置。|
    |发布批次|应用实例完成发布的批次，仅**发布策略**为**分批发布**时需要设置。|
    |批次内部署间隔|每一发布批次内，应用实例数大于1的情况下，应用实例间的部署时间间隔。您可以单击**展开高级选项**进行设置。|
    |最小存活实例数|每次滚动部署最小存活的实例数。您可以输入最小存活实例数或者选择**使用系统推荐值**使用SAE推荐的最小存活实例数。 **说明：** 每次滚动部署最小存活的实例数建议大于等于1，保证业务不中断。如果设置为0，应用在升级过程中将会中断业务。 |

4.  单击**确定**。


## 手动扩缩应用

应用扩缩是通过改变应用的实例数来增加或减少应用的计算容量。您可以在应用的实例负载过高时以手动方式添加新应用实例，在应用闲置时减少应用实例。

**说明：**

扩容时，如果扩容的实例数与原应用的实例数总和，大于应用的资源使用限制，则扩容失败。如果需要继续增加应用实例，请提[工单](https://selfservice.console.aliyun.com/ticket/category/edas)。

SAE的使用限制请参见[使用限制](/cn.zh-CN/产品简介/使用限制.md)。

如果您的扩容缩为非紧急需求，建议使用[弹性伸缩](/cn.zh-CN/应用管理/配置弹性伸缩策略.md)。

1.  登录 [SAE 控制台](https://sae.console.aliyun.com)。

2.  在左侧导航栏单击**应用列表**，在**应用列表**页面上方选择**地域**，单击具体应用名称。

3.  在**应用详情**页面的右上角，单击**手动扩缩**。

4.  在**应用扩缩**对话框内输入**应用目标实例数**，单击**确定**。

    ![应用手动扩缩](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/5153649951/p131913.png)

    -   应用扩容：若输入的目标实例数大于当前实例数，则表示增加实例数至该值，新增的应用实例与原有实例属性一致。扩容过程约3~5分钟，请耐心等待。
    -   应用缩容：若输入的目标实例数小于当前实例数，则随机释放多余数量的应用实例。

        **说明：** 如果您选择了**使用系统推荐值**作为应用的最小存活实例数，则应用可以缩容为0个实例；如果您选择自定义应用的最小存活实例数，则应用缩容的目标实例数不能小于您设置的最小存活实例数。


## 自动扩缩应用

如果您的扩容缩为非紧急需求，您可以选择自动扩缩应用实例，具体配置操作请参见[配置弹性伸缩策略](/cn.zh-CN/应用管理/配置弹性伸缩策略.md)。

## 启停应用

应用托管至SAE后，您可以根据业务需求启动或停止应用。

1.  登录 [SAE 控制台](https://sae.console.aliyun.com)。

2.  在左侧导航栏单击**应用列表**，在**应用列表**页面上方选择**地域**，单击具体应用名称。

3.  在**应用详情**页面的右上角，可启停应用。

    -   **停止应用**：单击**停止应用**，在弹出的**停止应用**对话框中单击**确定**，停止应用运行。

        当应用处于运行状态时，可以根据业务需求随时停止应用。停止应用时，该应用的最小存活实例数设置为0，实例数设置为0，其所使用的计算资源将停止计费或者计量。

        **说明：** 应用停止后，如果您的应用运行时还依赖其他产品或者服务，例如绑定了SLB，使用了VPC，该部分产品或者服务仍处于计费状态。

    -   **启动应用**：单击**启动应用**，在弹出的**启动应用**对话框中单击**确定**，启动处于停止状态的应用。

        当应用处于停止状态时，您可以根据需求启动该应用。应用启动后，启动的实例数恢复为停止前所配置值，同时重新开始计量或计费。


## 重启应用

应用托管至SAE后，您可以根据业务需要重启处于运行状态的应用。

1.  登录 [SAE 控制台](https://sae.console.aliyun.com)。

2.  在左侧导航栏单击**应用列表**，在**应用列表**页面上方选择**地域**，单击具体应用名称。

3.  在**应用详情**页面的右上角，选择**更多** \> **重启应用**，在弹出的**重启应用**对话框中设置**最小存活实例数**，并单击**确定**。

    ![重启应用设置](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/1974700061/p131935.png)

    **说明：** 在应用程序正常，业务异常运行时，请勿手动重启整个应用，请优先使用健康检查功能对应用实例状态进行诊断，如果实例状态不健康，SAE会自动重启实例。

    健康检查具体操作请参见[设置健康检查](/cn.zh-CN/应用部署/设置健康检查.md)。


## 删除应用

应用托管至SAE后，如果您不再需要使用该应用，可删除应用。

**说明：** 如果您的应用运行时还依赖其他产品或者服务，例如绑定了SLB、配置了VPC，那么删除前请确认所依赖的产品或者服务是否需要继续使用，若不需要则停止该服务，停止计费。

1.  登录 [SAE 控制台](https://sae.console.aliyun.com)。

2.  在左侧导航栏单击**应用列表**，在**应用列表**页面单击具体应用名称。

3.  在**应用详情**页面的右上角，选择**更多** \> **删除应用**，在弹出的**删除应用**对话框中单击**确定**，删除已经部署的应用。


## 启停应用监控

SAE集成了ARMS的多种监控能力，可以帮助您快速地定位出错接口和慢接口，帮助您检测内存泄漏，同时帮助您发现系统瓶颈，从而大幅提升线上问题诊断的效率。

**说明：** 在首次开启应用监控时，SAE将会自动重新部署应用。

1.  登录 [SAE 控制台](https://sae.console.aliyun.com)。

2.  在左侧导航栏单击**应用列表**，在**应用列表**页面单击具体应用名称。

3.  在**应用详情**页面的右上角，启停应用监控。

    -   **开启应用监控**：单击**更多** \> **开启应用监控**，在弹出的**开启应用监控**对话框中单击**确定**，开启对应用的监控。
    -   **停止应用监控**：单击**更多** \> **停止应用监控**，在弹出的**停止应用监控**对话框中单击**确定**，关闭已开启的应用监控。

## 问题反馈

如果您在使用SAE过程中有任何疑问，欢迎您扫描下面的二维码加入钉钉群进行反馈。

![SAE钉钉群2](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/9515823061/p72048.png)

