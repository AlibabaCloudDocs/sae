# 如何设置应用健康检查 {#concept_96713_zh .concept}

SAE 提供健康检查功能，用于查看容器和用户业务是否正常运行。设置健康检查可以在容器运行过程中，根据设置需求定时检查容器健康状况。

SAE 基于Kubernetes，提供了两种健康检查的方式：

-   **应用实例存活检查（liveness 配置）**：探测应用实例是否已经启动，该检查方式用于检测容器是否存活，类似于我们执行 `ps` 命令检查进程是否存在。如果容器的存活检查失败，集群会对该容器执行重启操作；若容器的存活检查成功则不执行任何操作。
-   **应用业务就绪检查（Readiness 配置）**：探测应用业务是否已经就绪，该检查方式用于检测容器是否准备好开始处理用户请求。一些程序的启动时间可能很长，比如要加载磁盘数据或者要依赖外部的某个模块启动完成才能提供服务。这时候程序进程在，但是并不能对外提供服务。这种场景下该检查方式就非常有用。

## 健康检查介绍 {#section_w1k_rtk_79b .section}

健康检查是指由 EDAS Agent（以下简称为 Agent）针对容器与应用进行定时检查与汇报，然后将结果反馈在控制台上的过程。健康检查能帮助您了解集群环境下整个服务的运行状态，从而为审查与定位问题提供帮助。EDAS 提供配置健康检查 URL，来检查部署的应用是否在正常运行。

## 配置健康检查 {#section_ddk_le6_yo5 .section}

在应用创建过程中，您可以部署应用并配置健康检查。当你更新应用时，可以重新配置健康检查。

1.  登录 [SAE 控制台](https://sae.console.aliyun.com)。
2.  在左侧导航栏单击**应用列表**，在应用列表页面右上角单击**创建应用**。
3.  在创建应用的**应用基本信息**页签内，设置应用相关信息，然后单击**下一步：应用部署配置**。
4.  在应用部署配置页面，您可以展开**应用健康检查设置**页签并设置相关配置。执行命令和执行参数分行显示，一行填写一个参数。

    **说明：** 应用实例存活检查和应用业务就绪检查的参数相同。

    ![应用健康检查设置](http://aliware-images.oss-cn-hangzhou.aliyuncs.com/edas/Severless/how%20to%20set%20health%20check.png)

    健康检查参数说明：

    -   **延迟时间**：输入延迟探测时间。例如设置为10，表示从应用启动后 10 秒开始探测。
    -   **超时时间**：设置健康检查超时等待时间。例如设置为10，表明执行健康检查的超时等待时间为10秒，如果超过这个时间，本次健康检查就被视为失败。若设置为0或不设置，默认超时等待时间为1秒。
    -   **执行命令**：在容器/进程内部执行一个命令，如果该命令的退出状态码为0，表示容器健康

        执行命令填写示例：右边的**示例**展示了二进制方式和**bash 方式**的可执行命令和参数的设置格式。例如您要执行`/run/server/-port=8080`，在 SAE 管控里面可以这样配置：

        ![执行命令](http://aliware-images.oss-cn-hangzhou.aliyuncs.com/edas/Severless/health%20check%20command%20example.png)


